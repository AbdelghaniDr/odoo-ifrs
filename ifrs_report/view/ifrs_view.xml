<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data noupdate="0">

		<!-- VISTAS -->

		<record model="ir.ui.view" id="view_ifrs_ifrs_tree">
		  <field name="name">ifrs.ifrs.tree</field>
		  <field name="model">ifrs.ifrs</field>
		  <field name="type">tree</field>
		  <field name="arch" type="xml">
			<tree string="International Financial Reporting Standards">
			  <field name="name" />
			  <field name="company_id" />
			  <field name="title" />
			  <field name="fiscalyear_id" />
			  <field name="state" />
			</tree>
		  </field>
		</record>

		<record model="ir.ui.view" id="view_ifrs_ifrs_form">
		  <field name="name">ifrs.ifrs.form</field>
		  <field name="model">ifrs.ifrs</field>
		  <field name="arch" type="xml">
			<form string="International Financial Reporting Standards" version="7.0">
              <header>
                <button string="Compute" name='compute' type='object' icon='gtk-execute' class="oe_inline_header"/>
                <label for='help'/>
                <field name='help'/>
			    <field name="state" widget="statusbar" statusbar_visible="draft,ready,done,cancel" class="oe_inline_header" />
              </header>  
                <group>
                    <group>
                        <group colspan='2' attrs="{'invisible':[('help','=',False)]}">
                            <i><label string='The name that this report will bear within the system. This name could be as descriptive as you want in order to improve the useability of it.'/></i>
                        </group>    
                        <field name="name" />
                        <group colspan='2' attrs="{'invisible':[('help','=',False)]}">
                            <i><label string='Some times it is useful that each report has its own code because doing so will render the report easier to find'/></i>
                        </group>    
                        <field name="code" />
                        <group colspan='2' attrs="{'invisible':[('help','=',False)]}">
                            <i><label string='The Title is the one that will be printed in the Heading of your Report. It is important to notice, that the Title is multilanguage, notice the little flag when editing the form. So you can Set the Title in as many languagues as you have them deployed in your system. If Your Preferred Language is English right now, then set the Title in English. To Set it in, e.g. Spanish, change your Preferred Language to Spanish and Set your Title Again. Those Languages have to be deployed first to be used.'/></i>
                        </group>    
                        <field name="title" />
                    </group>    
                <group>
                        <group colspan='2' attrs="{'invisible':[('help','=',False)]}">
                            <i><label string='Each report has to be related to a Company. It is a mandatory field not an option. This is due to the fact that you will be using Accounting Accounts that are only related to the company you set Here.'/></i>
                        </group>    
                        <field name="company_id" on_change='onchange_company_id(company_id)' required="1"/>
                        <group colspan='2' attrs="{'invisible':[('help','=',False)]}">
                            <i><label string='The currency set below is not an option nor you will be able to set its valued. It is automatically set when you select the company above. Thus the currency in this report is regarding the one in the company of the report. You can later set you own currency when print the report.'/></i>
                        </group>    
                        <field name="currency_id" required="1" readonly="1"/>
                        <group colspan='2' attrs="{'invisible':[('help','=',False)]}">
                            <i><label string='A Fiscal Year is required to compute the values that will be shown in the report as a preview in the lines below'/></i> 
                        </group>    
                        <field name="fiscalyear_id" required="1"/>
                    </group>
                </group>
                <notebook colspan='6'>
                    <page string='Report Lines'>
                        <group colspan='2' attrs="{'invisible':[('help','=',False)]}">
                            <b><label string='You have to fill the field below with Lines that retrieves values from your Accounting Accounts'/></b>
                        </group>    
                        <group colspan='2' attrs="{'invisible':[('help','=',False)]}">
                            <label string='There are four types of Lines to fill with the report:'/>
                        </group>    
                        <group colspan='2' attrs="{'invisible':[('help','=',False)]}">
                            <ul><label string='Abstract: This type is the one you have to use to create label that just get printed in the report. This line does not bear values at all and do not make computation'/></ul>
                            <ul><label string='Detail: This type is the one that is in direct contact with Accounting Accounts. You can select View Accounts (Summarized Accounts) and/or Normal Accounts (Movement Accounts)'/></ul>
                            <ul><label string='Total: This type is the one that summarize "Detail" Lines, you can even do mathematical operations with them'/></ul>
                            <ul><label string='Constant: This type is the one that just bears constant variable like Days of Period, Periods of Fiscal Year or Month of FiscalYear'/></ul>
                        </group>    
                      <field name="ifrs_lines_ids"  nolabel="1" colspan="4">
                        
                        <tree string="IFRS Lines">
                          <field name="id" />
                          <field name="sequence" />
                          <field name="name" />
                          <field name="type" />
                          <field name="cons_ids" />
                          <field name="total_ids" />
                          <field name="amount" />
                         <field name="value" />
                          <field name="invisible" />
                        </tree>
                        <form string="IFRS Lines">

                          <group colspan='4' col='6'>
                              <field name="sequence" />
                              <field name="name" />
                              <field name="invisible" />
                              <field name="type" />
                              <field name="comment"></field>
                              <group colspan='4' col='1'>
                                  <group colspan='2' attrs="{'invisible':[('type','!=','constant')]}" >
                                      <field name="constant_type" attrs="{'required':[('type','=','constant')]}" />
                                  </group>
                                  <group colspan='2' attrs="{'invisible':[('type','!=','detail')]}">
                                      <field name="acc_val"/>
                                      <field name="value" />
                                  </group>
                                  <group colspan='2' attrs="{'invisible':[('type','!=','total')]}">
                                      <field name="operator" />
                                      <field name="comparison" />
                                  </group>
                              </group>

                           </group>

                          <group colspan='6' col='6' attrs="{'invisible':[('type','=','abstract')]}">
                            <field name="amount" />
                            <field name="inv_sign" />
                          </group>

                          <group colspan='6'>
                              <group
                                colspan='6'
                                attrs="{'invisible':[('type','!=','detail')]}" height="50" width="300">
                                <separator string='Consolidated Accounts' colspan='6' />
                                <field name="cons_ids" width="450" nolabel='1'/>
                                <field name="analytic_ids" width="450" nolabel='1'/>
                              </group>
                              <group colspan='6'
                                attrs="{'invisible':[('type','!=','total')]}">
                                <group col='1'>
                                    <separator string='Total' colspan='2' />
                                    <field
                                        name="total_ids" widget="many2many"
                                        nolabel="1"
                                        domain="[('ifrs_id','=',parent.id),('type','!=','abstract'),('id','!=',id)]"
                                        />
                                </group>
                                
                                <group col='1' attrs="{'invisible':[('operator','=','without')]}">
                                    <separator string='Operand' colspan='2' />
                                    <field
                                        name="operand_ids" widget="many2many"
                                        nolabel='1'
                                        domain="['|',('ifrs_id','=',parent.id),('type','!=','abstract'),('id','!=',id)]">
                                    </field>
                                </group>
                              </group>
                          </group>

                        </form>
                      </field>
                    </page>
                    <page string='Based on Other Reports'>
                        <field 
                            name='ifrs_ids' 
                            nolabel='1' 
			    domain="[('id', '!=', [active_id])]"
                            />
                    </page>
                    <page string='Other Info'>
                        <field name="description" />
                    </page>
                </notebook>
			</form>
		  </field>
		</record>
<!--
		    <record id="view_board_search" model="ir.ui.view">
			<field name="name">ifrs.lines.search</field>
			<field name="model">ifrs.lines</field>
			<field name="type">search</field>
			<field name="arch" type="xml">
			    <search string="Buscar">
				<field name="name"/>
				<field name="sequence"/>
			    </search>
			</field>
		    </record> -->


		<record model="ir.ui.view" id="view_ifrs_lines_form">
			<field name="name">ifrs.lines.form</field>
			<field name="model">ifrs.lines</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="IFRS Line">
					<group col="6" colspan="4">
						<field name="name" />
						<field name="sequence"></field>
						<field name="type" />
						<field name="amount"></field>
						<field name="invisible"></field>
						<field name="ifrs_id"></field>
						<field name="comment"></field>
					</group>
				</form>
			</field>
		</record>
        
		<record model="ir.ui.view" id="view_ifrs_lines_tree">
			<field name="name">ifrs.lines.tree</field>
			<field name="model">ifrs.lines</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="IFRS Line">
						<field name="sequence"></field>
						<field name="name" />
						<field name="type" />
						<field name="amount"></field>
						<field name="invisible"></field>
						<field name="ifrs_id"></field>
						<field name="comment"></field>
				</tree>
			</field>
		</record>

		<!-- ACCIONES -->

		<record model="ir.actions.act_window" id="action_ifrs_ifrs_form">
		  <field name="name">IFRS</field>
		  <field name="res_model">ifrs.ifrs</field>
		  <field name="view_type">form</field>
		  <field name="view_mode">tree,form</field>
		</record>

		<record model="ir.actions.act_window" id="action_ifrs_lines_form">
			<field name="name">IFRS Lines</field>
			<field name="res_model">ifrs.lines</field>
			<field name="view_type">form</field>
			<field name="view_mode">search</field>
<!--			<field name="domain">[('type','=','total')]</field>-->
		</record>

		<!-- MENUS -->

		<menuitem
			id="menu_parent_ifrs"
			name="IFRS"
		/>

		<menuitem
			id="menu_ifrs_ifrs"
			name="IFRS"
			parent="menu_parent_ifrs"
		/>

		<!-- SUB-MENU -->

		<menuitem
			id="sub_menu_ifrs_ifrs"
			name="IFRS"
			parent="menu_ifrs_ifrs"
			action="action_ifrs_ifrs_form"
		/>

	</data>
</openerp>
